{% extends 'base.html.twig' %}

{% block title %}Ajouter un enfant{% endblock %}

{% block body %}
<div style="max-width: 800px; margin: 2rem auto; padding: 0 1rem;">
    <h1 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1.5rem;">Ajouter un enfant</h1>

    {% if error %}
        <div style="background: #fef2f2; border: 1px solid #f87171; color: #dc2626; padding: 0.75rem; margin-bottom: 1rem; border-radius: 4px;">
            {{ error|raw }}
        </div>
    {% endif %}

    {% if success %}
        <div style="background: #d1fae5; border: 1px solid #10b981; color: #065f46; padding: 0.75rem; margin-bottom: 1rem; border-radius: 4px;">
            {{ success|raw }}
        </div>
    {% endif %}

    <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 2rem;">
        <form method="POST" enctype="multipart/form-data">
            <div style="display: grid; gap: 1.5rem;">
                <div>
                    <label for="nom" style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">Nom *</label>
                    <input type="text" id="nom" name="nom" required 
                           style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 4px; font-size: 1rem;"
                           placeholder="Nom de l'enfant">
                </div>

                <div>
                    <label for="prenom" style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">Prénom *</label>
                    <input type="text" id="prenom" name="prenom" required 
                           style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 4px; font-size: 1rem;"
                           placeholder="Prénom de l'enfant">
                </div>

                <div>
                    <label for="dateNaissance" style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">Date de naissance *</label>
                    <input type="date" id="dateNaissance" name="dateNaissance" required 
                           style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 4px; font-size: 1rem;"
                           max="{{ 'now'|date('Y-m-d') }}">
                    <p style="margin-top: 0.25rem; font-size: 0.75rem; color: #6b7280;">
                        L'âge sera calculé automatiquement à partir de cette date
                    </p>
                </div>

                <div>
                    <label for="sexe" style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">Sexe *</label>
                    <select id="sexe" name="sexe" required style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 4px; font-size: 1rem;">
                        <option value="">Sélectionnez le sexe</option>
                        <option value="M">Masculin</option>
                        <option value="F">Féminin</option>
                    </select>
                </div>

                <div>
                    <label for="ecoleId" style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">École *</label>
                    <select id="ecoleId" name="ecoleId" required 
                            style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 4px; font-size: 1rem;">
                        <option value="">Sélectionnez une école</option>
                        {% for ecole in ecoles %}
                            <option value="{{ ecole.id }}">{{ ecole.nom }} - {{ ecole.ville }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div>
                    <label for="certificatScolarite" style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">Certificat de scolarité (PDF) *</label>
                    <input type="file" id="certificatScolarite" name="certificatScolarite" accept="application/pdf" required style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 4px; font-size: 1rem;">
                    <p style="margin-top: 0.5rem; font-size: 0.875rem; color: #6b7280;">
                        <strong>Note:</strong> Le certificat de scolarité doit être un fichier PDF.
                    </p>
                </div>

                <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                    <a href="{{ path('app_home') }}" 
                       style="padding: 0.75rem 1.5rem; background: #6b7280; color: white; border-radius: 4px; text-decoration: none; hover: background: #4b5563;">
                        Annuler
                    </a>
                    <button type="submit" 
                            style="padding: 0.75rem 1.5rem; background: #2563eb; color: white; border: none; border-radius: 4px; font-size: 1rem; cursor: pointer; hover: background: #1d4ed8;">
                        Ajouter l'enfant
                    </button>
                </div>
            </div>
        </form>
    </div>

    <div style="margin-top: 2rem; padding: 1rem; background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 8px;">
        <h3 style="font-weight: 600; margin-bottom: 0.5rem; color: #0369a1;">Informations importantes</h3>
        <ul style="font-size: 0.875rem; color: #0369a1; margin: 0; padding-left: 1.5rem;">
            <li>Le certificat de scolarité doit être au format base64</li>
            <li>L'enfant sera en attente de validation par un administrateur</li>
            <li>Seuls les enfants validés peuvent être utilisés dans les trajets</li>
            <li>Vous recevrez une notification une fois l'enfant validé</li>
        </ul>
    </div>
</div>
{% endblock %} 